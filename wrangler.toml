# Base configuration
name = "zxcv-lite"
main = "./.output/server/index.mjs"
compatibility_date = "2025-09-15"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true

# Production configuration (default)
[[d1_databases]]
binding = "DB"
database_name = "zxcv-db"
database_id = "ee2c13b9-0d5b-49ea-9bf4-5a65e2f7ad4e"

[[r2_buckets]]
binding = "R2"
bucket_name = "zxcv"

[vars]
# Non-secret configuration for production
# Secrets (JWT_SECRET, GOOGLE_CLIENT_ID, etc.) are set via wrangler secret during deployment
JWT_ALGORITHM = "HS256"
JWT_EXPIRES_IN = "7d"

[[ratelimits]]
name = "AUTH_RATE_LIMITER"
namespace_id = "1001"
simple = { limit = 5, period = 60 }

[[ratelimits]]
name = "REGISTER_RATE_LIMITER"
namespace_id = "1002"
simple = { limit = 3, period = 60 }

[[ratelimits]]
name = "PASSWORD_RESET_RATE_LIMITER"
namespace_id = "1003"
simple = { limit = 3, period = 60 }

[[ratelimits]]
name = "API_RATE_LIMITER"
namespace_id = "1004"
simple = { limit = 60, period = 60 }

[[ratelimits]]
name = "AVATAR_UPLOAD_RATE_LIMITER"
namespace_id = "1005"
simple = { limit = 10, period = 60 }

[[ratelimits]]
name = "REPORT_RATE_LIMITER"
namespace_id = "1006"
simple = { limit = 10, period = 60 }

[placement]
mode = "smart"

# Workers Assets configuration
[assets]
binding = "ASSETS"
directory = ".output/public"
